IF
  Global("MT_PortalSequence","GLOBAL",0)
  Clicked([PC])
THEN
  RESPONSE #100
    SetGlobal("MT_PortalSequence","GLOBAL",0)
    ActionOverride("PortalFire1",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
END

IF
  Global("MT_PortalSequence","GLOBAL",1)
  Clicked([PC])
THEN
  RESPONSE #100
    SetGlobal("MT_PortalSequence","GLOBAL",0)
    ActionOverride("PortalFire1",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
END

IF
  Global("MT_PortalSequence","GLOBAL",2)
  Clicked([PC])
THEN
  RESPONSE #100
    IncrementGlobal("MT_PortalSequence","GLOBAL",1)
    PlaySoundPoint("AM6400c",[313.658])
END

IF
  Global("MT_PortalSequence","GLOBAL",3)
  Clicked([PC])
THEN
  RESPONSE #100
    SetGlobal("MT_PortalSequence","GLOBAL",0)
    ActionOverride("PortalFire1",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
END

IF
  Global("MT_PortalSequence","GLOBAL",4)
  Clicked([PC])
THEN
  RESPONSE #100
    SetGlobal("MT_PortalSequence","GLOBAL",0)
    ActionOverride("PortalFire1",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
END

IF
  Global("MT_PortalSequence","GLOBAL",5)
  Clicked([PC])
THEN
  RESPONSE #100
    SetGlobal("MT_PortalSequence","GLOBAL",0)
    ActionOverride("PortalFire1",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player1,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
    ActionOverride("PortalFire1",ReallyForceSpell(Player2,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire2",ReallyForceSpell(Player3,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire3",ReallyForceSpell(Player4,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire4",ReallyForceSpell(Player5,TRAP_MAGE_TOWER_PORTAL))
    ActionOverride("PortalFire5",ReallyForceSpell(Player6,TRAP_MAGE_TOWER_PORTAL))
    Wait(1)
END

IF
  !TimerActive(1)
  GlobalGT("MT_PortalSequence","GLOBAL",3)
THEN
  RESPONSE #100
    ForceSpellPoint([500.550],WIZARD_AGANNAZAR_SCORCHER)
    StartTimer(1,4)
END

